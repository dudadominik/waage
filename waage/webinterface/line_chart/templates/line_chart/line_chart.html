{% extends "line_chart/base.html" %}
{% block content %}

<!DOCTYPE HTML>
<html>

<head>  
<script type="text/javascript">
function StringtoFloat(string_array){
    var messwerte_array=[];
    var tmp = '';
    var check;
    for (var i=0; i<=string_array.length; i++){
        check = parseInt(string_array[i]);
        if (isNaN(check)==false){
            tmp+=string_array[i];
        }
        else if (string_array[i]=='.'){
            tmp+=string_array[i];
        }
        else if (string_array[i]==',' && tmp!=''){
            messwerte_array.push(parseFloat(tmp));
            tmp='';
        }
        else if (string_array[i]==']'){
            return messwerte_array;
        }
    }
}


window.onload = function () {
var messwerte = "{{messwerte}}";
messwerte_array = StringtoFloat(messwerte);       
    
var datum = "{{datum}}";
console.log(datum);
var chart = new CanvasJS.Chart("chartContainer",
{
zoomEnabled: false,
animationEnabled: true,
title:{
text: "messwerte"
},
axisX:{
    interval: "1",
    intervalType: "hour",
    valueFormatString: "DD-MMM-YYYY-HH"
},
axisY2:{
valueFormatString:"0.0 kg",

maximum: 1.2,
interval: .2,
interlacedColor: "#F5F5F5",
gridColor: "#D7D7D7",      
tickColor: "#D7D7D7"                                
},
theme: "theme2",
toolTip:{
shared: true
},
legend:{
verticalAlign: "bottom",
horizontalAlign: "center",
fontSize: 15,
fontFamily: "Lucida Sans Unicode"

},
data: [
{        
type: "line",
lineThickness:3,
axisYType:"secondary",
showInLegend: true,           
name: "Messwert", 
dataPoints: [
{ x: new Date(2002, 06, 03, 22), y: messwerte_array[0]-221 },
{ x: new Date(2002, 06, 03, 23), y: 0.94 }
]
}



],
legend: {
cursor:"pointer",
itemclick : function(e) {
if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
e.dataSeries.visible = false;
}
else {
e.dataSeries.visible = true;
}
chart.render();
}
}
});

chart.render();
}
</script>
</head>
<body>
<div id="chartContainer" style="height: 300px; width: 100%;">
</div>
</body>
</html>

{% endblock %}
