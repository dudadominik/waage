{% extends "line_chart/base.html" %}
{% block content %}

<script type="text/javascript">
function StringtoFloat(string_array){
    var messwerte_array=[];
    var tmp = '';
    var check;
    for (var i=0; i<=string_array.length; i++){
        check = parseInt(string_array[i]);
        if (isNaN(check)==false){
            tmp+=string_array[i];
        }
        else if (string_array[i]=='.'){
            tmp+=string_array[i];
        }
        else if (string_array[i]==',' && tmp!=''){
            messwerte_array.push(parseFloat(tmp));
            tmp='';
        }
        else if (string_array[i]==']'){
            return messwerte_array;
        }
    }
}


window.onload = function () {
var messwerte = "{{messwerte}}";
messwerte_array = StringtoFloat(messwerte);       
    
var datum = "{{datum}}";
console.log(datum);
var chart = new CanvasJS.Chart("chartContainer",
{
zoomEnabled: false,
animationEnabled: true,
title:{
text: "messwerte"
},
axisX:{
    interval: "1",
    intervalType: "hour",
    valueFormatString: "DD-MMM-YYYY HH-mm"
},
axisY2:{
valueFormatString:"0.0 kg",

maximum: 1.2,
interval: .2,
interlacedColor: "#F5F5F5",
gridColor: "#D7D7D7",      
tickColor: "#D7D7D7"                                
},
theme: "theme2",
toolTip:{
shared: true
},
legend:{
verticalAlign: "bottom",
horizontalAlign: "center",
fontSize: 15,
fontFamily: "Lucida Sans Unicode"

},
data: [
{        
type: "line",
lineThickness:3,
axisYType:"secondary",
showInLegend: true,           
name: "Messwert", 
dataPoints: [
{ x: new Date(2002, 06, 03, 22,0,3), y: messwerte_array[0]-222 },
{ x: new Date(2002, 06, 03, 22,23,3), y: messwerte_array[0]-222 },
{ x: new Date(2002, 06, 03, 22,44,4), y: messwerte_array[0]-222 },
{ x: new Date(2002, 06, 03, 23,6,2), y: 0.94 }
]
}



],
legend: {
cursor:"pointer",
itemclick : function(e) {
if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
e.dataSeries.visible = false;
}
else {
e.dataSeries.visible = true;
}
chart.render();
}
}
});

chart.render();
}
</script>

<script type='text/javascript'>
$(function(){
    $('.input-daterange').datepicker({
        autoclose:true
    });
});
</script>

<div class="row">
    <div class=col-sm-1>
    </div>
    <div class="col-sm-10">
        <div class="input-daterange input-group" id="datepicker">
            <input type="text" class="input-sm form-control" name="form" placeholder="From date"/>
                <span class="input-group-addon">to</span>
            <input type="text" class="input-sm form-control" name="to" placeholder="To date"/>
        </div>
    </div>
</div>

<br>
        
<div id="chartContainer" style="height: 600px; width: 100%;">
</div>
</body>
</html>

{% endblock %}
